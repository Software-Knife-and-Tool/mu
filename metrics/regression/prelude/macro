(crux:type-of ((:lambda () (prelude:compile '(define-macro prelude:a-macro () prelude:a-macro)) (prelude:macro-function 'prelude:a-macro ()))))
((:lambda () (prelude:compile '(define-macro no-arg-macro () ''no-arg-macro)) (prelude:macroexpand '(no-arg-macro) ())))
((:lambda () (prelude:compile '(define-macro no-arg-macro () ''no-arg-macro)) (crux:eval (prelude:compile '(no-arg-macro)))))
((:lambda () (prelude:compile '(define-macro arg-macro (arg) arg)) (prelude:macroexpand '(arg-macro (crux:sum 1 2)) ())))
((:lambda () (prelude:compile '(define-macro arg-macro (arg) arg)) (crux:eval (prelude:compile '(arg-macro (crux:sum 1 2))))))
((:lambda () (prelude:compile '(define-macro rest-macro (&rest args) (crux:cons '(lambda (&rest rest) rest) args))) (crux:eval (prelude:compile '(rest-macro (crux:sum 1 2))))))
((:lambda () (prelude:compile '(define-macro rest-macro (&rest args) (crux:cons '(lambda (&rest rest) rest) args))) (crux:eval (prelude:compile '(rest-macro (crux:sum 1 2) (crux:sum 3 4))))))
((:lambda () (prelude:compile '(define-macro rest-macro (&rest args) (crux:cons '(lambda (&rest rest) rest) args))) (crux:eval (prelude:compile '(rest-macro 1 2 3)))))
